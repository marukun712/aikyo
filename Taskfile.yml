version: "3"

tasks:
  run:
    cmds:
      - |
        echo "
         █████╗  ██╗ ██╗  ██╗ ██╗   ██╗  ██████╗
        ██╔══██╗ ██║ ██║ ██╔╝ ╚██╗ ██╔╝ ██╔═══██╗
        ███████║ ██║ █████╔╝   ╚████╔╝  ██║   ██║
        ██╔══██║ ██║ ██╔═██╗    ╚██╔╝   ██║   ██║
        ██║  ██║ ██║ ██║  ██╗    ██║    ╚██████╔╝
        ╚═╝  ╚═╝ ╚═╝ ╚═╝  ╚═╝    ╚═╝     ╚═════╝
        "
      - task: up

  up:
    deps:
      - task: router
      - task: firehose

  router:
    cmds:
      - npm run router > /dev/null 2>&1
    silent: true

  firehose:
    cmds:
      - npm run firehose

  companion:
    cmds:
      - npm run companion --config={{.CLI_ARGS}}
